{"version":3,"file":"2-form.js","sources":["../src/js/2-form.js"],"sourcesContent":["import debounce from 'lodash.debounce';\n\nconst refs = {\n  feedbackForm: document.querySelector('.feedback-form'),\n};\n\n// const LOCAL_STORAGE_KEY = 'feedback-form-state';\n\nconst LocalStorageService = {\n  key: 'feedback-form-state',\n\n  save(data) {\n    localStorage.setItem(this.key, JSON.stringify(data));\n  },\n\n  load() {\n    return JSON.parse(localStorage.getItem(this.key));\n  },\n\n  clear() {\n    localStorage.removeItem(this.key);\n  },\n};\n\n// const formData = getFormDataFromLocaleStorage(LOCAL_STORAGE_KEY) ?? {\n//   email: '',\n//   message: '',\n// };\n\nconst formData = LocalStorageService.load() ?? {\n  email: '',\n  message: '',\n};\n\npopulateFormFields();\n\nrefs.feedbackForm.addEventListener('submit', handleFeedbackFormSubmit);\nrefs.feedbackForm.addEventListener('input', debounce(handleInputChange, 250));\n\nfunction handleFeedbackFormSubmit(evt) {\n  evt.preventDefault();\n\n  const form = evt.currentTarget;\n  const { email, message } = formData;\n\n  if (!email || !message) {\n    alert('Fill please all fields');\n    return;\n  }\n\n  console.log(formData);\n\n  form.reset();\n  LocalStorageService.clear();\n  resetFormData();\n  // removeDataFromLocaleStorage(LOCAL_STORAGE_KEY);\n}\n\nfunction handleInputChange(evt) {\n  formData[evt.target.name] = evt.target.value.trim();\n  LocalStorageService.save(formData);\n  // setDataToLocaleStorage(LOCAL_STORAGE_KEY, formData);\n}\n\nfunction resetFormData() {\n  Object.keys(formData).forEach(key => (formData[key] = ''));\n}\n\nfunction populateFormFields() {\n  // const { email, message } = refs.feedbackForm.elements;\n  // email.value = formData.email;\n  // message.value = formData.message;\n\n  Object.keys(formData).forEach(key => {\n    refs.feedbackForm.elements[key].value = formData[key];\n  });\n}\n"],"names":["refs","LocalStorageService","data","formData","populateFormFields","handleFeedbackFormSubmit","debounce","handleInputChange","evt","form","email","message","resetFormData","key"],"mappings":"wIAEA,MAAMA,EAAO,CACX,aAAc,SAAS,cAAc,gBAAgB,CACvD,EAIMC,EAAsB,CAC1B,IAAK,sBAEL,KAAKC,EAAM,CACT,aAAa,QAAQ,KAAK,IAAK,KAAK,UAAUA,CAAI,CAAC,CACpD,EAED,MAAO,CACL,OAAO,KAAK,MAAM,aAAa,QAAQ,KAAK,GAAG,CAAC,CACjD,EAED,OAAQ,CACN,aAAa,WAAW,KAAK,GAAG,CACjC,CACH,EAOMC,EAAWF,EAAoB,QAAU,CAC7C,MAAO,GACP,QAAS,EACX,EAEAG,IAEAJ,EAAK,aAAa,iBAAiB,SAAUK,CAAwB,EACrEL,EAAK,aAAa,iBAAiB,QAASM,EAASC,EAAmB,GAAG,CAAC,EAE5E,SAASF,EAAyBG,EAAK,CACrCA,EAAI,eAAc,EAElB,MAAMC,EAAOD,EAAI,cACX,CAAE,MAAAE,EAAO,QAAAC,CAAS,EAAGR,EAE3B,GAAI,CAACO,GAAS,CAACC,EAAS,CACtB,MAAM,wBAAwB,EAC9B,MACD,CAED,QAAQ,IAAIR,CAAQ,EAEpBM,EAAK,MAAK,EACVR,EAAoB,MAAK,EACzBW,GAEF,CAEA,SAASL,EAAkBC,EAAK,CAC9BL,EAASK,EAAI,OAAO,IAAI,EAAIA,EAAI,OAAO,MAAM,OAC7CP,EAAoB,KAAKE,CAAQ,CAEnC,CAEA,SAASS,GAAgB,CACvB,OAAO,KAAKT,CAAQ,EAAE,QAAQU,GAAQV,EAASU,CAAG,EAAI,EAAG,CAC3D,CAEA,SAAST,GAAqB,CAK5B,OAAO,KAAKD,CAAQ,EAAE,QAAQU,GAAO,CACnCb,EAAK,aAAa,SAASa,CAAG,EAAE,MAAQV,EAASU,CAAG,CACxD,CAAG,CACH"}